<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e3c72;
      background-image: linear-gradient(315deg, #1e3c72 0%, #2a5298 74%);
      margin: 0;
      padding: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: white;
    }

    .container {
      max-width: 900px;
      width: 100%;
      padding: 20px;
    }

    .card {
      background-color: rgba(0, 0, 0, 0.3);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
      width: 100%;
      text-align: center;
      backdrop-filter: blur(8px);
    }

    .search-container {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .card h2 {
      margin-bottom: 5px;
      font-size: 28px;
    }

    .main-temp {
      font-size: 48px;
      font-weight: bold;
      margin: 10px 0;
    }

    .weather-info {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 20px 0;
    }

    .icon {
      width: 100px;
      height: 100px;
    }

    .details {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.1);
      padding: 15px;
      border-radius: 10px;
    }

    .details div {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .details i {
      font-size: 20px;
      margin-bottom: 8px;
    }

    .forecast {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      padding-top: 25px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .day {
      text-align: center;
      font-size: 16px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 15px 10px;
      flex: 1;
      min-width: 120px;
    }

    .day img {
      width: 50px;
      height: 50px;
      margin: 10px 0;
    }

    input, button {
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      border: none;
    }

    input {
      flex: 1;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
    }

    button {
      background-color: #ff7e5f;
      color: white;
      cursor: pointer;
      min-width: 120px;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #ff9a87;
      transform: translateY(-2px);
    }

    .error {
      color: #ffcc00;
      font-size: 14px;
      margin-top: 10px;
      background: rgba(0, 0, 0, 0.3);
      padding: 10px;
      border-radius: 5px;
    }

    .loading {
      display: none;
      text-align: center;
      margin: 20px 0;
    }

    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 4px solid #ff7e5f;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .date-info {
      font-size: 18px;
      opacity: 0.9;
      margin-bottom: 5px;
    }

    .temp-minmax {
      font-size: 14px;
      margin-top: 5px;
      opacity: 0.8;
    }

    .highlight {
      color: #ffcc00;
      font-weight: bold;
    }

    @media (max-width: 768px) {
      .weather-info {
        flex-direction: column;
      }
      
      .forecast {
        flex-direction: column;
      }
      
      .day {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-align: left;
        padding: 15px;
      }
      
      .day > div {
        display: flex;
        align-items: center;
        gap: 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="search-container">
        <input type="text" id="cityInput" placeholder="Enter city name" />
        <button id="btn1"><i class="fas fa-search"></i> Get Weather</button>
      </div>

      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>Loading weather data...</p>
      </div>

      <div id="weatherData">
        <h2 id="cityName">--</h2>
        <div class="date-info" id="currentDate">--</div>
        
        <div class="weather-info">
          <img id="weatherIcon" class="icon" src="" alt="Weather Icon" style="display: none;" />
          <div class="main-temp" id="temp">--°C</div>
        </div>
        
        <div id="condition">--</div>

        <div class="details">
          <div>
            <i class="fas fa-wind"></i>
            <div>Wind: <span id="wind">--</span> km/h</div>
          </div>
          <div>
            <i class="fas fa-tint"></i>
            <div>Humidity: <span id="humidity">--</span>%</div>
          </div>
          <div>
            <i class="fas fa-tachometer-alt"></i>
            <div>Pressure: <span id="pressure">--</span> hPa</div>
          </div>
        </div>

        <div class="forecast" id="forecast">
          <!-- Forecast will be dynamically generated -->
        </div>
      </div>

      <p class="error" id="errorMessage"></p>
    </div>
  </div>

  <script>
    const btn1 = document.getElementById("btn1");
    const loading = document.getElementById("loading");
    const weatherData = document.getElementById("weatherData");
    const API_KEY = '-----';

    // Function to get day name from date
    function getDayName(date) {
      const days = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
      return days[date.getDay()];
    }

    // Function to update current date display
    function updateCurrentDate() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      document.getElementById("currentDate").innerText = now.toLocaleDateString('en-US', options);
    }

    // Function to update forecast section
    function updateForecast(forecastData) {
      const forecastContainer = document.getElementById("forecast");
      forecastContainer.innerHTML = '';
      
      // We'll take one forecast per day (every 24 hours)
      for (let i = 0; i < 40; i += 8) {
        const forecast = forecastData.list[i];
        if (!forecast) break;
        
        const date = new Date(forecast.dt * 1000);
        const dayName = getDayName(date);
        const iconCode = forecast.weather[0].icon;
        const iconURL = `https://openweathermap.org/img/wn/${iconCode}@2x.png`;
        const temp = (forecast.main.temp - 273.15).toFixed(1);
        const tempMin = (forecast.main.temp_min - 273.15).toFixed(1);
        const tempMax = (forecast.main.temp_max - 273.15).toFixed(1);
        
        const dayElement = document.createElement('div');
        dayElement.className = 'day';
        dayElement.innerHTML = `
          <div>${dayName}</div>
          <img src="${iconURL}" alt="${forecast.weather[0].description}" />
          <div class="highlight">${temp}°C</div>
          <div class="temp-minmax">${tempMin}° / ${tempMax}°</div>
        `;
        
        forecastContainer.appendChild(dayElement);
      }
    }

    // Function to update current weather
    function updateCurrentWeather(data) {
      const tempC = (data.main.temp - 273.15).toFixed(1);
      const iconCode = data.weather[0].icon;
      const iconURL = `https://openweathermap.org/img/wn/${iconCode}@4x.png`;
      
      document.getElementById("cityName").innerText = `${data.name}, ${data.sys.country}`;
      document.getElementById("temp").innerText = `${tempC}°C`;
      document.getElementById("condition").innerText = data.weather[0].description;
      document.getElementById("humidity").innerText = data.main.humidity;
      document.getElementById("pressure").innerText = data.main.pressure;
      document.getElementById("wind").innerText = data.wind.speed;
      document.getElementById("weatherIcon").src = iconURL;
      document.getElementById("weatherIcon").style.display = "block";
    }

    // Function to get weather data
    async function getWeatherData(city) {
      try {
        // Show loading
        loading.style.display = 'block';
        weatherData.style.opacity = '0.5';
        
        // Step 1: Get coordinates from city
        const geoURL = `https://api.openweathermap.org/geo/1.0/direct?q=${city}&limit=1&appid=${API_KEY}`;
        const geoResponse = await fetch(geoURL);
        const locData = await geoResponse.json();
        
        if (!locData.length) throw new Error("City not found");
        
        const { lat, lon } = locData[0];
        
        // Step 2: Get current weather and forecast
        const weatherURL = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}`;
        const forecastURL = `https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${API_KEY}`;
        
        const [weatherResponse, forecastResponse] = await Promise.all([
          fetch(weatherURL),
          fetch(forecastURL)
        ]);
        
        const [weatherData, forecastData] = await Promise.all([
          weatherResponse.json(),
          forecastResponse.json()
        ]);
        
        // Update UI
        updateCurrentDate();
        updateCurrentWeather(weatherData);
        updateForecast(forecastData);
        
        // Clear errors
        document.getElementById("errorMessage").innerText = "";
      } catch (err) {
        console.error(err);
        document.getElementById("errorMessage").innerText = "City not found or API error. Please try again.";
      } finally {
        // Hide loading
        loading.style.display = 'none';
        weatherData.style.opacity = '1';
      }
    }

    // Event listener for button click
    btn1.addEventListener("click", () => {
      const city = document.getElementById('cityInput').value.trim();
      
      if (!city) {
        document.getElementById("errorMessage").innerText = "Please enter a city name.";
        return;
      }
      
      getWeatherData(city);
    });

    // Event listener for Enter key
    document.getElementById('cityInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        btn1.click();
      }
    });

    // Initialize with a default city
    window.onload = () => {
      updateCurrentDate();
      getWeatherData('London');
    };
  </script>
</body>
</html>
